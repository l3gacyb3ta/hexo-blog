<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <link rel="authorization_endpoint" href="https://indieauth.com/auth">
    <link rel="token_endpoint" href="https://tokens.indieauth.com/token">
    <link rel="microsub" href="https://aperture.p3k.io/microsub/639">

    <!-- Webmentions -->
    <link rel="webmention" href="https://webmention.io/l3gacy.tk/webmention" />
    <link rel="pingback" href="https://webmention.io/l3gacy.tk/xmlrpc" />
    <script src="https://l3gacy.tk/js/webmention.min.js" async></script>
    
    <!-- Indieauth -->
    <link href="https://github.com/l3gacyb3ta" rel="me">
    <link rel="pgpkey" href="https://keybase.io/l3gacyb3ta/pgp_keys.asc">

    <link rel="stylesheet" href="https://l3gacy.tk/css/custom.css">

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="Ethereum - a cool thing!So a while back I was asked by my dad, “What does BitCoin have to do with these computer parts shortages?” Well I knew the basics of the blockchain idea, but I didn&#39;t know">
<meta property="og:type" content="article">
<meta property="og:title" content="ethereum &amp; marshy, a new project!">
<meta property="og:url" content="https://l3gacy.tk/2021/03/13/ethereummarshyanewproject/index.html">
<meta property="og:site_name" content="l3gacy&#39;s b3ta">
<meta property="og:description" content="Ethereum - a cool thing!So a while back I was asked by my dad, “What does BitCoin have to do with these computer parts shortages?” Well I knew the basics of the blockchain idea, but I didn&#39;t know">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-03-13T14:48:01.000Z">
<meta property="article:modified_time" content="2021-04-16T18:54:49.146Z">
<meta property="article:author" content="l3gacyb3ta">
<meta property="article:tag" content="crypto">
<meta name="twitter:card" content="summary">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/android-chrome-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>ethereum &amp; marshy, a new project!</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/lib/meslo-LG/styles.css">

    
<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">

    
<link rel="stylesheet" href="/css/style.css">


    <!-- rss -->
    
    
      <link rel="alternate" href="/true" title="l3gacy&#39;s b3ta" type="application/atom+xml" />
    
    
    <!-- jquery -->
    
<script src="/lib/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.4.0"></head>

<body>
    
    <div class="background">
      
        <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/archives/">blog</a></li>
         
          <li><a href="/about-me/">about me</a></li>
         
          <li><a target="_blank" rel="noopener" href="http://github.com/l3gacyb3ta">github</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://app.singlelink.co/u/l3gacy">contact</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2021/04/13/Got-this-working-on-github-pages/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li>
        
        
        <li><a class="icon" href="/2021/02/18/imagesmadebywritingbots/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://l3gacy.tk/2021/03/13/ethereummarshyanewproject/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://l3gacy.tk/2021/03/13/ethereummarshyanewproject/&text=ethereum &amp; marshy, a new project!"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://l3gacy.tk/2021/03/13/ethereummarshyanewproject/&title=ethereum &amp; marshy, a new project!"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://l3gacy.tk/2021/03/13/ethereummarshyanewproject/&is_video=false&description=ethereum &amp; marshy, a new project!"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=ethereum &amp; marshy, a new project!&body=Check out this article: https://l3gacy.tk/2021/03/13/ethereummarshyanewproject/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://l3gacy.tk/2021/03/13/ethereummarshyanewproject/&title=ethereum &amp; marshy, a new project!"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://l3gacy.tk/2021/03/13/ethereummarshyanewproject/&title=ethereum &amp; marshy, a new project!"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://l3gacy.tk/2021/03/13/ethereummarshyanewproject/&title=ethereum &amp; marshy, a new project!"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://l3gacy.tk/2021/03/13/ethereummarshyanewproject/&title=ethereum &amp; marshy, a new project!"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://l3gacy.tk/2021/03/13/ethereummarshyanewproject/&name=ethereum &amp; marshy, a new project!&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Ethereum-a-cool-thing"><span class="toc-number">1.</span> <span class="toc-text">Ethereum - a cool thing!</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Code-Breakdown"><span class="toc-number">1.0.1.</span> <span class="toc-text">Code Breakdown:</span></a></li></ol></li></ol></li></ol>
    </div>
  </span>
</div>

      
      <div class="content index width mx-auto px2 my4">
          
          <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        ethereum &amp; marshy, a new project!
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">l3gacy's b3ta</span>
      </span>
      
    <div class="postdate">
        <time datetime="2021-03-13T14:48:01.000Z" itemprop="datePublished">2021-03-13</time>
    </div>


      
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link-link" href="/tags/crypto/" rel="tag">crypto</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h1 id="Ethereum-a-cool-thing"><a href="#Ethereum-a-cool-thing" class="headerlink" title="Ethereum - a cool thing!"></a>Ethereum - a cool thing!</h1><p>So a while back I was asked by my dad, <em>“What does BitCoin have to do with these computer parts shortages?”</em> Well I knew the basics of the blockchain idea, but I didn&#39;t know the specifics. So after a bit of googling I found out and that was that. Now a few days later I saw a video in my YouTube recommended feed: “Programming the blockchain with Ethereum!” or something like that. I then watched it and got sucked into a rabbit hole.</p>
<p>After I had fallen through that, I wanted to make a smart contract. So the first thing I did was… copy an ERC20 token&#39;s code. (Life of a developer lol) That got me into tokens, so I found Uniswap and I was like <em>“I wanna make something cool and social on the blockchain! Like Uniswap!”</em> So I started writing a little app to help with situations like paying a bill together with friends.</p>
<p>While I was writing the code for it at school (<em>after</em> I had done my work, don&#39;t worry), one of my friends was looking over my shoulder and asked me what I was doing. So I explained and she really wanted to draw an icon for it, so Marshy, the bill splitting dapp, was born! (The icon is a marshmellow, fyi)</p>
<p>The code I&#39;ve written is on my <a target="_blank" rel="noopener" href="https://github.com/l3gacyb3ta">GitHub</a>, and y&#39;all are free to contribute! I&#39;m gonna learn React to make a cool web interface using web3.js. If anyone has any tips, please contact me on my contacts page.</p>
<h3 id="Code-Breakdown"><a href="#Code-Breakdown" class="headerlink" title="Code Breakdown:"></a>Code Breakdown:</h3><pre><code>// SPDX-License-Identifier: UNLICENSED
pragma solidity &gt;=0.7.0 &lt;0.8.0;

contract MarshyShare &#123;
    // The owner, for refund of extra eth.
    address payable private owner;
    // Current eth locked up in the contract
    int256 balance;
    // The goal of the contract, once this is reached, it will pay out.
    int256 goal;
    // The address the goal should be payed out to.
    address payable payee;
</code></pre>
<p>The first bit of the code sets up the smart-contract, and gives it some properties, such as an owner, a payee, a balance, and a goal. The addresses have to be &#39;payable&#39; so that we can transfer ether to them in the future.</p>
<pre><code>// event for EVM logging
    event OwnerSet(address indexed oldOwner, address indexed newOwner);
    event GoalFulfilled();
</code></pre>
<p>This sets up a bit of logging, most of which I haven&#39;t implemented yet \xf0\x9f\x98\x85.</p>
<pre><code>    // modifier to check if caller is owner
    modifier isOwner() &#123;
        // If the first argument of \&#39;require\&#39; evaluates to \&#39;false\&#39;, execution terminates and all
        // changes to the state and to Ether balances are reverted.
        // This used to consume all gas in old EVM versions, but not anymore.
        // It is often a good idea to use \&#39;require\&#39; to check if functions are called correctly.
        // As a second argument, you can also provide an explanation about what went wrong.
        require(msg.sender == owner, &quot;Caller is not owner&quot;);
        _;
    &#125;
</code></pre>
<p>This sets up an important &#39;modifier&#39;, which can run before functions, to make sure certain functions can only be called by the owner. Nothing uses this yet, but it will come up in future Marshy versions.</p>
<pre><code>    function deposit() public payable &#123;
        // adds to balance and subracts from goal
        balance = balance + int(msg.value);
        goal = goal - int(msg.value);

        // If the goal is met
        if(goal &lt;= 0) &#123;
            // Pay the payee
            payee.transfer(uint(goal));
            // Set the new balance
            balance = balance - goal;
            // logging!
            emit GoalFulfilled();
            // transfer extra eth, if the balance is positive (should be)
            if(balance &gt; 0)&#123;
                owner.transfer(uint(balance));
            &#125;
        &#125;
    &#125;
</code></pre>
<p>This is the big fancy deposit function! What it does is that, when ether is received, it does some math to see if the goal is met, and then pays everyone out.</p>
<pre><code>    // Pretty easy, just get the balance
    function getBalance() public view returns(int256 balance) &#123;return balance;&#125;

    // Same as above, but with the current goal
    function getGoal() public view returns(int256 _goal) &#123;return goal;&#125;
</code></pre>
<p>These two are mostly for the web dapp I have planned, so that you can get balances and the such.</p>
<pre><code>    // Fallback deposit functions
    fallback() external payable &#123;balance = balance + int(msg.value);&#125;

    receive() external payable &#123;balance = balance + int(msg.value);&#125;
&#125;
</code></pre>
<p>This is the end, and it just makes sure any accidental transfers get logged in the balance, it doesn&#39;t yet interact with the goal or the payout logic yet, so that&#39;s for an update down the line.</p>
<p>The full code is below, and on my GitHub. Feel free to use it, it doesn&#39;t have a license.</p>
<pre><code>// SPDX-License-Identifier: UNLICENSED
pragma solidity &gt;=0.7.0 &lt;0.8.0;

contract MarshyShare &#123;
    // The owner, for refund of extra eth.
    address payable private owner;
    // Current eth locked up in the contract
    int256 balance;
    // The goal of the contract, once this is reached, it will pay out.
    int256 goal;
    // The address the goal should be payed out to.
    address payable payee;


    // event for EVM logging
    event OwnerSet(address indexed oldOwner, address indexed newOwner);
    event GoalFulfilled();

    // modifier to check if caller is owner
    modifier isOwner() &#123;
        // If the first argument of \&#39;require\&#39; evaluates to \&#39;false\&#39;, execution terminates and all
        // changes to the state and to Ether balances are reverted.
        // This used to consume all gas in old EVM versions, but not anymore.
        // It is often a good idea to use \&#39;require\&#39; to check if functions are called correctly.
        // As a second argument, you can also provide an explanation about what went wrong.
        require(msg.sender == owner, &quot;Caller is not owner&quot;);
        _;
    &#125;

    constructor(int256 toBePayed, address payable _payee) &#123;
        // Set balance to 0
        balance = 0;
        // The owner is the sender and the payee is the _payee argument
        owner = msg.sender;
        payee = _payee;
        // setup goal
        goal = toBePayed;
    &#125;


    function deposit() public payable &#123;
        // adds to balance and subracts from goal
        balance = balance + int(msg.value);
        goal = goal - int(msg.value);

        // If the goal is met
        if(goal &lt;= 0) &#123;
            // Pay the payee
            payee.transfer(uint(goal));
            // Set the new balance
            balance = balance - goal;
            // logging!
            emit GoalFulfilled();
            // transfer extra eth, if the balance is positive (should be)
            if(balance &gt; 0)&#123;
                owner.transfer(uint(balance));
            &#125;
        &#125;
    &#125;

    // Pretty easy, just get the balance
    function getBalance() public view returns(int256 balance) &#123;return balance;&#125;

    // Same as above, but with the current goal
    function getGoal() public view returns(int256 _goal) &#123;return goal;&#125;

    // Fallback deposit functions
    fallback() external payable &#123;balance = balance + int(msg.value);&#125;

    receive() external payable &#123;balance = balance + int(msg.value);&#125;
&#125;
</code></pre>

  </div>
</article>

  <div id="webmentions"></div>



      </div>
      
       <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/archives/">blog</a></li>
         
          <li><a href="/about-me/">about me</a></li>
         
          <li><a target="_blank" rel="noopener" href="http://github.com/l3gacyb3ta">github</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://app.singlelink.co/u/l3gacy">contact</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Ethereum-a-cool-thing"><span class="toc-number">1.</span> <span class="toc-text">Ethereum - a cool thing!</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Code-Breakdown"><span class="toc-number">1.0.1.</span> <span class="toc-text">Code Breakdown:</span></a></li></ol></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://l3gacy.tk/2021/03/13/ethereummarshyanewproject/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://l3gacy.tk/2021/03/13/ethereummarshyanewproject/&text=ethereum &amp; marshy, a new project!"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://l3gacy.tk/2021/03/13/ethereummarshyanewproject/&title=ethereum &amp; marshy, a new project!"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://l3gacy.tk/2021/03/13/ethereummarshyanewproject/&is_video=false&description=ethereum &amp; marshy, a new project!"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=ethereum &amp; marshy, a new project!&body=Check out this article: https://l3gacy.tk/2021/03/13/ethereummarshyanewproject/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://l3gacy.tk/2021/03/13/ethereummarshyanewproject/&title=ethereum &amp; marshy, a new project!"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://l3gacy.tk/2021/03/13/ethereummarshyanewproject/&title=ethereum &amp; marshy, a new project!"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://l3gacy.tk/2021/03/13/ethereummarshyanewproject/&title=ethereum &amp; marshy, a new project!"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://l3gacy.tk/2021/03/13/ethereummarshyanewproject/&title=ethereum &amp; marshy, a new project!"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://l3gacy.tk/2021/03/13/ethereummarshyanewproject/&name=ethereum &amp; marshy, a new project!&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick='$("#toc-footer").toggle();return false;'><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick='$("#share-footer").toggle();return false;'><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick='$("#nav-footer").toggle();return false;'><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

      
      <footer id="footer">
  <div class="footer-left">
    <a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/archives/">blog</a></li>
         
          <li><a href="/about-me/">about me</a></li>
         
          <li><a target="_blank" rel="noopener" href="http://github.com/l3gacyb3ta">github</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://app.singlelink.co/u/l3gacy">contact</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

      
<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>


<script src="/js/main.js"></script>

<!-- Google Analytics -->

<!-- Disqus Comments -->


    </div>

    <div id="hcard-Raleigh-Wise" class="h-card" rel="me" style="display: none">
      <span class="fn n">
         <span class="given-name">Raleigh Wise</span>
       <span class="additional-name"></span>
       <span class="family-name"></span>
     </span>
      <a class="email" href="mailto:l3gacy.b3ta@disroot.org">l3gacy.b3ta@disroot.org</a>
      <div class="adr">
       <span class="region">GA</span>
        <a class="u-url u-uid" href="http://l3gacy.tk/">Link to l3gacy.tk</a>
       <span class="country-name">USA</span>
       <p class="p-note">Hello! I’m Raleigh (he/they), I do computer stuff!
        <img class="u-photo" src="images/avatar.png" />
       </p>
      </div>
     <div><span class="category">he/they</span></div><p style="font-size:smaller;">This <a target="_blank" rel="noopener" href="http://microformats.org/wiki/hcard">hCard</a> created with the <a target="_blank" rel="noopener" href="http://microformats.org/code/hcard/creator">hCard creator</a>.</p>
     </div>
</body>
</html>
